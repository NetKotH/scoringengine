package main

import (
	"crypto/tls"
	"log"
)

var (
	certBytes = `
-----BEGIN CERTIFICATE-----
MIIHFzCCBf+gAwIBAgISAzleir0dJhKICYyF9HbLY6mnMA0GCSqGSIb3DQEBCwUA
MEoxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MSMwIQYDVQQD
ExpMZXQncyBFbmNyeXB0IEF1dGhvcml0eSBYMzAeFw0xODA3MTUxNzU4NDJaFw0x
ODEwMTMxNzU4NDJaMCExHzAdBgNVBAMTFnNjb3JlYm9hcmQubmV0a290aC5vcmcw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLujdVmgJTI30uYVJ2uBl1
wNnl5gh0bsl5M044cZOqFLJ7euC9EMiOZOXoMIAP+yvXI/Kw3/9dDN6qMau4tVNp
vVV8DfN/kGGLEpRsOcsjI5KYC7llStB+nw//Ym4GgTUqPxvLV1pV0hPe4Iqnu7Mt
TZ4JLFsHKdhihvWXCj4/kRbB0wYd3cCOwcmtfs+sEyvRpwU3Jnal4KC4GuZwbHoJ
GfpnVcr6j4ewvHaOlwDpxPcU9ue1CLBLBNttRVasgOp08s1ryWotp6WVTzv9Ugi7
YC3vM/Ok74KYJLvMDr6L/S/rJqxzNeZTyOxoL7mmzPiaHp1X/AZmRNfmHoRa7kwE
wCeR4JDlcnhUrDMyvkzeBchp8ZUxZYvqVNRtSjwg1BqUkvEbSMjw9jHjcslrVwrB
Uiu1IgVqoPPcWpxPWYDtXSO/LV7ZxL5w/PlnCjrH+zUTss75NqRas2sOjuDUXe1p
iCLGL59r/Bw5J2/UHSTrnyjZD0IKXMaKAFC1QoO1TL5QxMbFFpB2mBtsY263/Uwy
j6M3j7uvgY+lbRBWjzGmQbL/iA9DIENXjwKaUQxrVkaP8zruDm/aI5zr+oBJsyeD
KUGVE9I02CLi04jFBHGFriJQUu6cl+nhfwhVwfuvBWbsPXQWo0z6j/i1wTqdbk0a
DCci6FxPuzobbu0bBTpRawIDAQABo4IDHjCCAxowDgYDVR0PAQH/BAQDAgWgMB0G
A1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAMBgNVHRMBAf8EAjAAMB0GA1Ud
DgQWBBQDQgABGy22IWrasFtvZI3G7GuqdzAfBgNVHSMEGDAWgBSoSmpjBH3duubR
ObemRWXv86jsoTBvBggrBgEFBQcBAQRjMGEwLgYIKwYBBQUHMAGGImh0dHA6Ly9v
Y3NwLmludC14My5sZXRzZW5jcnlwdC5vcmcwLwYIKwYBBQUHMAKGI2h0dHA6Ly9j
ZXJ0LmludC14My5sZXRzZW5jcnlwdC5vcmcvMCEGA1UdEQQaMBiCFnNjb3JlYm9h
cmQubmV0a290aC5vcmcwgf4GA1UdIASB9jCB8zAIBgZngQwBAgEwgeYGCysGAQQB
gt8TAQEBMIHWMCYGCCsGAQUFBwIBFhpodHRwOi8vY3BzLmxldHNlbmNyeXB0Lm9y
ZzCBqwYIKwYBBQUHAgIwgZ4MgZtUaGlzIENlcnRpZmljYXRlIG1heSBvbmx5IGJl
IHJlbGllZCB1cG9uIGJ5IFJlbHlpbmcgUGFydGllcyBhbmQgb25seSBpbiBhY2Nv
cmRhbmNlIHdpdGggdGhlIENlcnRpZmljYXRlIFBvbGljeSBmb3VuZCBhdCBodHRw
czovL2xldHNlbmNyeXB0Lm9yZy9yZXBvc2l0b3J5LzCCAQQGCisGAQQB1nkCBAIE
gfUEgfIA8AB1ACk8UZZUyDlluqpQ/FgH1Ldvv1h6KXLcpMMM9OVFR/R4AAABZJ9P
KlIAAAQDAEYwRAIgOpXExGKVLG4WUKRJO61+ZZcb1ya5TCN/EHw+gjFY4ioCIBII
GQKgLM9yMs3lT7C88MVVhLzUBLAf6GfF2jbsT0w4AHcA23Sv7ssp7LH+yj5xbSzl
uaq7NveEcYPHXZ1PN7Yfv2QAAAFkn08ueAAABAMASDBGAiEAzvpr9sYHRnsUuzin
SAMIr1+Vd8vpTRDbYSruDD6oEIECIQD8j44gUieFNdnIfftEzAqxLSwsuI6aWdoA
DNPUXkuUozANBgkqhkiG9w0BAQsFAAOCAQEAkpnlJeOXBUf3Ky5mU3p8l4Hp/4li
442CYnUd6jFPe/8nb5IHY9qAkIJUU+c5WbNUxbsr/qShauQHL9M3FbmSVvRNRWSu
9oTYZ1pzbWBK7FiNidVOw1eMB6G/VcfdgSfGuoP8cCGQC6onG2JPOrCDnUOKM7+B
t2W5qFmttLBNvFfo+rxV7GAhOA6O2tEwwPDBoW7NFwyDMA1XBEuvbYIrS2JJzL/j
hcccKIcYkzHTS9/V720gTXG/RlnpwVIxGi/+Qc5h+ziAc+UHsq07EZIQ+fiKFiz3
vREA0QIDJrJJnchMZ8EWGq4wbMt1cGdE2dG6McqAgXUoFKpz9l2W5mQpMQ==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEkjCCA3qgAwIBAgIQCgFBQgAAAVOFc2oLheynCDANBgkqhkiG9w0BAQsFADA/
MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMT
DkRTVCBSb290IENBIFgzMB4XDTE2MDMxNzE2NDA0NloXDTIxMDMxNzE2NDA0Nlow
SjELMAkGA1UEBhMCVVMxFjAUBgNVBAoTDUxldCdzIEVuY3J5cHQxIzAhBgNVBAMT
GkxldCdzIEVuY3J5cHQgQXV0aG9yaXR5IFgzMIIBIjANBgkqhkiG9w0BAQEFAAOC
AQ8AMIIBCgKCAQEAnNMM8FrlLke3cl03g7NoYzDq1zUmGSXhvb418XCSL7e4S0EF
q6meNQhY7LEqxGiHC6PjdeTm86dicbp5gWAf15Gan/PQeGdxyGkOlZHP/uaZ6WA8
SMx+yk13EiSdRxta67nsHjcAHJyse6cF6s5K671B5TaYucv9bTyWaN8jKkKQDIZ0
Z8h/pZq4UmEUEz9l6YKHy9v6Dlb2honzhT+Xhq+w3Brvaw2VFn3EK6BlspkENnWA
a6xK8xuQSXgvopZPKiAlKQTGdMDQMc2PMTiVFrqoM7hD8bEfwzB/onkxEz0tNvjj
/PIzark5McWvxI0NHWQWM6r6hCm21AvA2H3DkwIDAQABo4IBfTCCAXkwEgYDVR0T
AQH/BAgwBgEB/wIBADAOBgNVHQ8BAf8EBAMCAYYwfwYIKwYBBQUHAQEEczBxMDIG
CCsGAQUFBzABhiZodHRwOi8vaXNyZy50cnVzdGlkLm9jc3AuaWRlbnRydXN0LmNv
bTA7BggrBgEFBQcwAoYvaHR0cDovL2FwcHMuaWRlbnRydXN0LmNvbS9yb290cy9k
c3Ryb290Y2F4My5wN2MwHwYDVR0jBBgwFoAUxKexpHsscfrb4UuQdf/EFWCFiRAw
VAYDVR0gBE0wSzAIBgZngQwBAgEwPwYLKwYBBAGC3xMBAQEwMDAuBggrBgEFBQcC
ARYiaHR0cDovL2Nwcy5yb290LXgxLmxldHNlbmNyeXB0Lm9yZzA8BgNVHR8ENTAz
MDGgL6AthitodHRwOi8vY3JsLmlkZW50cnVzdC5jb20vRFNUUk9PVENBWDNDUkwu
Y3JsMB0GA1UdDgQWBBSoSmpjBH3duubRObemRWXv86jsoTANBgkqhkiG9w0BAQsF
AAOCAQEA3TPXEfNjWDjdGBX7CVW+dla5cEilaUcne8IkCJLxWh9KEik3JHRRHGJo
uM2VcGfl96S8TihRzZvoroed6ti6WqEBmtzw3Wodatg+VyOeph4EYpr/1wXKtx8/
wApIvJSwtmVi4MFU5aMqrSDE6ea73Mj2tcMyo5jMd6jmeWUHK8so/joWUoHOUgwu
X4Po1QYz+3dszkDqMp4fklxBwXRsW10KXzPMTZ+sOPAveyxindmjkW8lGy+QsRlG
PfZ+G6Z6h7mjem0Y+iWlkYcV4PIWL1iwBi8saCbGS5jN2p8M+X+Q7UNKEkROb3N6
KOqkqm57TH2H3eDJAkSnh6/DNFu0Qg==
-----END CERTIFICATE-----
`
	keyBytes = `
-----BEGIN RSA PRIVATE KEY-----
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
-----END RSA PRIVATE KEY-----
`
)

func setupTLS() *tls.Config {
	cert, err := tls.X509KeyPair([]byte(certBytes), []byte(keyBytes))
	if err != nil {
		log.Println(err)
		return nil
	}

	config := &tls.Config{
		MinVersion:               tls.VersionTLS12,
		Certificates:             []tls.Certificate{cert},
		CurvePreferences:         []tls.CurveID{tls.CurveP521, tls.CurveP384, tls.CurveP256},
		PreferServerCipherSuites: true,
		CipherSuites: []uint16{
			tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,
			tls.TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,
			tls.TLS_RSA_WITH_AES_256_GCM_SHA384,
			tls.TLS_RSA_WITH_AES_256_CBC_SHA,
		},
	}

	return config
}
