package main

import (
	"crypto/tls"
	"log"
)

var (
	certBytes = `
-----BEGIN CERTIFICATE-----
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
STbpX0iK7X8=
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEkjCCA3qgAwIBAgIQCgFBQgAAAVOFc2oLheynCDANBgkqhkiG9w0BAQsFADA/
MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMT
DkRTVCBSb290IENBIFgzMB4XDTE2MDMxNzE2NDA0NloXDTIxMDMxNzE2NDA0Nlow
SjELMAkGA1UEBhMCVVMxFjAUBgNVBAoTDUxldCdzIEVuY3J5cHQxIzAhBgNVBAMT
GkxldCdzIEVuY3J5cHQgQXV0aG9yaXR5IFgzMIIBIjANBgkqhkiG9w0BAQEFAAOC
AQ8AMIIBCgKCAQEAnNMM8FrlLke3cl03g7NoYzDq1zUmGSXhvb418XCSL7e4S0EF
q6meNQhY7LEqxGiHC6PjdeTm86dicbp5gWAf15Gan/PQeGdxyGkOlZHP/uaZ6WA8
SMx+yk13EiSdRxta67nsHjcAHJyse6cF6s5K671B5TaYucv9bTyWaN8jKkKQDIZ0
Z8h/pZq4UmEUEz9l6YKHy9v6Dlb2honzhT+Xhq+w3Brvaw2VFn3EK6BlspkENnWA
a6xK8xuQSXgvopZPKiAlKQTGdMDQMc2PMTiVFrqoM7hD8bEfwzB/onkxEz0tNvjj
/PIzark5McWvxI0NHWQWM6r6hCm21AvA2H3DkwIDAQABo4IBfTCCAXkwEgYDVR0T
AQH/BAgwBgEB/wIBADAOBgNVHQ8BAf8EBAMCAYYwfwYIKwYBBQUHAQEEczBxMDIG
CCsGAQUFBzABhiZodHRwOi8vaXNyZy50cnVzdGlkLm9jc3AuaWRlbnRydXN0LmNv
bTA7BggrBgEFBQcwAoYvaHR0cDovL2FwcHMuaWRlbnRydXN0LmNvbS9yb290cy9k
c3Ryb290Y2F4My5wN2MwHwYDVR0jBBgwFoAUxKexpHsscfrb4UuQdf/EFWCFiRAw
VAYDVR0gBE0wSzAIBgZngQwBAgEwPwYLKwYBBAGC3xMBAQEwMDAuBggrBgEFBQcC
ARYiaHR0cDovL2Nwcy5yb290LXgxLmxldHNlbmNyeXB0Lm9yZzA8BgNVHR8ENTAz
MDGgL6AthitodHRwOi8vY3JsLmlkZW50cnVzdC5jb20vRFNUUk9PVENBWDNDUkwu
Y3JsMB0GA1UdDgQWBBSoSmpjBH3duubRObemRWXv86jsoTANBgkqhkiG9w0BAQsF
AAOCAQEA3TPXEfNjWDjdGBX7CVW+dla5cEilaUcne8IkCJLxWh9KEik3JHRRHGJo
uM2VcGfl96S8TihRzZvoroed6ti6WqEBmtzw3Wodatg+VyOeph4EYpr/1wXKtx8/
wApIvJSwtmVi4MFU5aMqrSDE6ea73Mj2tcMyo5jMd6jmeWUHK8so/joWUoHOUgwu
X4Po1QYz+3dszkDqMp4fklxBwXRsW10KXzPMTZ+sOPAveyxindmjkW8lGy+QsRlG
PfZ+G6Z6h7mjem0Y+iWlkYcV4PIWL1iwBi8saCbGS5jN2p8M+X+Q7UNKEkROb3N6
KOqkqm57TH2H3eDJAkSnh6/DNFu0Qg==
-----END CERTIFICATE-----
`
	keyBytes = `
-----BEGIN RSA PRIVATE KEY-----
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
-----END RSA PRIVATE KEY-----
`
)

func setupTLS() *tls.Config {
	cert, err := tls.X509KeyPair([]byte(certBytes), []byte(keyBytes))
	if err != nil {
		log.Println(err)
		return nil
	}

	config := &tls.Config{
		MinVersion:               tls.VersionTLS12,
		Certificates:             []tls.Certificate{cert},
		CurvePreferences:         []tls.CurveID{tls.CurveP521, tls.CurveP384, tls.CurveP256},
		PreferServerCipherSuites: true,
		CipherSuites: []uint16{
			tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,
			tls.TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,
			tls.TLS_RSA_WITH_AES_256_GCM_SHA384,
			tls.TLS_RSA_WITH_AES_256_CBC_SHA,
		},
	}

	return config
}
