package main

import (
	"crypto/tls"
	"log"
)

var (
	certBytes = `
-----BEGIN CERTIFICATE-----
MIIHGTCCBgGgAwIBAgISAxOoQ5Y8K+Ploqv7OjTNmKxlMA0GCSqGSIb3DQEBCwUA
MEoxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MSMwIQYDVQQD
ExpMZXQncyBFbmNyeXB0IEF1dGhvcml0eSBYMzAeFw0xODA3MDEyMTIyMThaFw0x
ODA5MjkyMTIyMThaMCExHzAdBgNVBAMTFnNjb3JlYm9hcmQubmV0a290aC5vcmcw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQCzB6OFC6Ob6TeV7428Jed0
dY5M8elOogoR3VLOhKamAuXXOljWAraW8a+n3RAsMcgIemRZIyHE5/WJjkdHouqt
7HqenCqXPFo/+z6xY4L6QDtZwdZ/jzd7pJB4BmNx1vDwc15jSEYYqQOHMH3htK0F
KqYx6pogFjOIaOm3KLw7G5aVSEcPx0JzzivHfxKWtZfxQEXUybzV49J3WSTfvoxH
kuNueso3xV5JQYrDtjTUPxQ/jJIMwDkIMpub/XrbBgtvLvfxzl6rgLyz4IEypUhj
A3/+4mA18qXEkh81IE1NnSqZON+Su8GHODLWBCmmfmCIp5eAhoy10hinxIuJ2Jol
DdySOhKieKKG9N1jqwFWJMEwyjpol9ts3yQIYnk1UWDmSfw9+bhpuFqOwrGXb5nA
AHrgn+B6kXftHEl10vUEh+/PxKy0mejgsAzX3Oni94i2OroZa5aUR97QFIu1fObn
jl6LImL3EI2Xuo3U2eOJUepbU3BDK44ovtijTKQICh/f9Vz+Xoje/WXByYs3fGHK
tax6XDXc/p6efMF9RxD4ovzG2Y2NKP6wGKdd5RYTZ7oD8iOy6zzj1YDrR77bLUAY
iTZbp5c9x0vh8Ky9yskX4zBX34BtKaCaCMCHkjQVtMY9KbYY2RnHqwDDd7rMF/0f
uXDHZToIYHdyFdB4x8pkYQIDAQABo4IDIDCCAxwwDgYDVR0PAQH/BAQDAgWgMB0G
A1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAMBgNVHRMBAf8EAjAAMB0GA1Ud
DgQWBBQVrDiyXoUQMwAswW1+S0m0RgFK+DAfBgNVHSMEGDAWgBSoSmpjBH3duubR
ObemRWXv86jsoTBvBggrBgEFBQcBAQRjMGEwLgYIKwYBBQUHMAGGImh0dHA6Ly9v
Y3NwLmludC14My5sZXRzZW5jcnlwdC5vcmcwLwYIKwYBBQUHMAKGI2h0dHA6Ly9j
ZXJ0LmludC14My5sZXRzZW5jcnlwdC5vcmcvMCEGA1UdEQQaMBiCFnNjb3JlYm9h
cmQubmV0a290aC5vcmcwgf4GA1UdIASB9jCB8zAIBgZngQwBAgEwgeYGCysGAQQB
gt8TAQEBMIHWMCYGCCsGAQUFBwIBFhpodHRwOi8vY3BzLmxldHNlbmNyeXB0Lm9y
ZzCBqwYIKwYBBQUHAgIwgZ4MgZtUaGlzIENlcnRpZmljYXRlIG1heSBvbmx5IGJl
IHJlbGllZCB1cG9uIGJ5IFJlbHlpbmcgUGFydGllcyBhbmQgb25seSBpbiBhY2Nv
cmRhbmNlIHdpdGggdGhlIENlcnRpZmljYXRlIFBvbGljeSBmb3VuZCBhdCBodHRw
czovL2xldHNlbmNyeXB0Lm9yZy9yZXBvc2l0b3J5LzCCAQYGCisGAQQB1nkCBAIE
gfcEgfQA8gB3ACk8UZZUyDlluqpQ/FgH1Ldvv1h6KXLcpMMM9OVFR/R4AAABZFfw
hlUAAAQDAEgwRgIhAMG/krWiKwodXWic/Rl+rzG91fRZElwSwgPrAIAfnWDPAiEA
gar8dL7ql76aN+GtbBzV5zB8quWzuo0mVofyhqeRiaoAdwDbdK/uyynssf7KPnFt
LOW5qrs294Rxg8ddnU83th+/ZAAAAWRX8IalAAAEAwBIMEYCIQCNIUka5tc6q6Fb
9GOjBxo4Yeg4jXdpv1aRpXr5EAfmsQIhALjpP0ZlcRgjY4c64fsFqCVd+yh1NMTq
rz/3CbNupFmxMA0GCSqGSIb3DQEBCwUAA4IBAQBH4A5B5JIcITl9/KSuz4wE2LG1
ZKKe+vkRod+NMlFC34b+z+aTLFWSRINzCdOsfcaE6K9hxZG68hQoKPrZM/hmeo4q
pymN9XkZdt1xBvUigtcxcN+fP/2EMCphT6JNrnEHC6x7UHwfcGrx/QlkWL/hRj0r
kcS7wotcAPWJ9G/I3XfbD/XJz3tl4P7YmRGJWRDgnExd/IiclFEhYdxOpcqviRiU
xX5b9TpnmW4m8LDmxTrODEoN8+n3diDxnysdFr8aD59gCR7jOVwMBUgBr501bogp
R1JwfwlkM/p9ve9Cc77jPSKBsFnFgpSNNKEGGAbKGAPmEb/fWeaxd/FXiVzu
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEkjCCA3qgAwIBAgIQCgFBQgAAAVOFc2oLheynCDANBgkqhkiG9w0BAQsFADA/
MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMT
DkRTVCBSb290IENBIFgzMB4XDTE2MDMxNzE2NDA0NloXDTIxMDMxNzE2NDA0Nlow
SjELMAkGA1UEBhMCVVMxFjAUBgNVBAoTDUxldCdzIEVuY3J5cHQxIzAhBgNVBAMT
GkxldCdzIEVuY3J5cHQgQXV0aG9yaXR5IFgzMIIBIjANBgkqhkiG9w0BAQEFAAOC
AQ8AMIIBCgKCAQEAnNMM8FrlLke3cl03g7NoYzDq1zUmGSXhvb418XCSL7e4S0EF
q6meNQhY7LEqxGiHC6PjdeTm86dicbp5gWAf15Gan/PQeGdxyGkOlZHP/uaZ6WA8
SMx+yk13EiSdRxta67nsHjcAHJyse6cF6s5K671B5TaYucv9bTyWaN8jKkKQDIZ0
Z8h/pZq4UmEUEz9l6YKHy9v6Dlb2honzhT+Xhq+w3Brvaw2VFn3EK6BlspkENnWA
a6xK8xuQSXgvopZPKiAlKQTGdMDQMc2PMTiVFrqoM7hD8bEfwzB/onkxEz0tNvjj
/PIzark5McWvxI0NHWQWM6r6hCm21AvA2H3DkwIDAQABo4IBfTCCAXkwEgYDVR0T
AQH/BAgwBgEB/wIBADAOBgNVHQ8BAf8EBAMCAYYwfwYIKwYBBQUHAQEEczBxMDIG
CCsGAQUFBzABhiZodHRwOi8vaXNyZy50cnVzdGlkLm9jc3AuaWRlbnRydXN0LmNv
bTA7BggrBgEFBQcwAoYvaHR0cDovL2FwcHMuaWRlbnRydXN0LmNvbS9yb290cy9k
c3Ryb290Y2F4My5wN2MwHwYDVR0jBBgwFoAUxKexpHsscfrb4UuQdf/EFWCFiRAw
VAYDVR0gBE0wSzAIBgZngQwBAgEwPwYLKwYBBAGC3xMBAQEwMDAuBggrBgEFBQcC
ARYiaHR0cDovL2Nwcy5yb290LXgxLmxldHNlbmNyeXB0Lm9yZzA8BgNVHR8ENTAz
MDGgL6AthitodHRwOi8vY3JsLmlkZW50cnVzdC5jb20vRFNUUk9PVENBWDNDUkwu
Y3JsMB0GA1UdDgQWBBSoSmpjBH3duubRObemRWXv86jsoTANBgkqhkiG9w0BAQsF
AAOCAQEA3TPXEfNjWDjdGBX7CVW+dla5cEilaUcne8IkCJLxWh9KEik3JHRRHGJo
uM2VcGfl96S8TihRzZvoroed6ti6WqEBmtzw3Wodatg+VyOeph4EYpr/1wXKtx8/
wApIvJSwtmVi4MFU5aMqrSDE6ea73Mj2tcMyo5jMd6jmeWUHK8so/joWUoHOUgwu
X4Po1QYz+3dszkDqMp4fklxBwXRsW10KXzPMTZ+sOPAveyxindmjkW8lGy+QsRlG
PfZ+G6Z6h7mjem0Y+iWlkYcV4PIWL1iwBi8saCbGS5jN2p8M+X+Q7UNKEkROb3N6
KOqkqm57TH2H3eDJAkSnh6/DNFu0Qg==
-----END CERTIFICATE-----
`
	keyBytes = `
-----BEGIN RSA PRIVATE KEY-----
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
-----END RSA PRIVATE KEY-----
`
)

func setupTLS() *tls.Config {
	cert, err := tls.X509KeyPair([]byte(certBytes), []byte(keyBytes))
	if err != nil {
		log.Println(err)
		return nil
	}

	config := &tls.Config{
		MinVersion:               tls.VersionTLS12,
		Certificates:             []tls.Certificate{cert},
		CurvePreferences:         []tls.CurveID{tls.CurveP521, tls.CurveP384, tls.CurveP256},
		PreferServerCipherSuites: true,
		CipherSuites: []uint16{
			tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,
			tls.TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,
			tls.TLS_RSA_WITH_AES_256_GCM_SHA384,
			tls.TLS_RSA_WITH_AES_256_CBC_SHA,
		},
	}

	return config
}
